<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Building from sources | MixedReality-WebRTC Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Building from sources | MixedReality-WebRTC Documentation ">
    <meta name="generator" content="docfx 2.48.0.0">
    
    <link rel="shortcut icon" href="../mr-webrtc_icon.svg">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../mr-webrtc_icon.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" id="branch-selector">
                <select name="branch"></select>
              </form>
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="building-from-sources">Building from sources</h1>

<p>The MixedReality-WebRTC libraries are built from the <code>Microsoft.MixedReality.WebRTC.sln</code> Visual Studio solution located at the root of the repository.</p>
<p>If you want to start right away with MixedReality-WebRTC, the recommended approach is to consume the precompiled binaries distributed as NuGet packages instead. See <a href="download.html">Download</a> for details.</p>
<h2 id="prerequisites">Prerequisites</h2>
<h3 id="environment-and-tooling">Environment and tooling</h3>
<ul>
<li><p>The NuGet packages for the input dependencies (see <em>Core input dependencies</em> below) require in total approximately <strong>10 GB of disk space</strong>. Those dependencies contain unstripped <code>.lib</code> files much larger than the final compiled DLL libraries, for both the Debug and Release build configurations.</p>
</li>
<li><p>Due to Windows paths length limit, it is recommended to <strong>clone the source repository close to the root</strong> of the filesystem, <em>e.g.</em> <code>C:\mr-webrtc\</code> or similar, as the recursive external dependencies create a deep hierarchy which may otherwise produce paths beyond the OS limit and result in build failure.</p>
</li>
<li><p>The solution uses <strong>Visual Studio 2019</strong> with the following features:</p>
<ul>
<li><p>The <strong>MSVC v142 - VS 2019 C++ x64/x86 build tools</strong> toolchain is required to build the C++17 library of MixedReality-WebRTC. This is installed by default with the <strong>Desktop development with C++</strong> workload on Visual Studio 2019.</p>
</li>
<li><p>For ARM support, the <strong>MSVC v142 - VS 2019 C++ ARM build tools</strong> toolchain is also required.</p>
</li>
<li><p>The C# library requires a .NET Standard 2.0 compiler, like the Roslyn compiler available as part of Visual Studio when installing the <strong>.NET desktop development</strong> workload.</p>
</li>
<li><p>The UWP libraries and projects require UWP support from the compiler, available as part of Visual Studio when installing the <strong>Universal Windows Platform development</strong> workload.</p>
</li>
</ul>
</li>
<li><p>The Unity integration has been tested on <a href="https://unity3d.com/get-unity/download">Unity</a> <strong>2018.3.x</strong> and <strong>2019.1.x</strong>. Versions earlier than 2018.3.x may work but are not officially supported.</p>
</li>
</ul>
<h3 id="core-input-dependencies">Core input dependencies</h3>
<p>The so-called <em>Core</em> input dependencies are constituted of:</p>
<ul>
<li><code>webrtc.lib</code> : A static library containing the Google implementation of the WebRTC standard.</li>
<li><code>Org.WebRtc.winmd</code> : A set of WinRT wrappers for accessing the WebRTC API from UWP.</li>
</ul>
<p>Those dependencies require many extra prerequisites. They are also complex and time-consuming to build. Therefore to save time and avoid headache the MixedReality-WebRTC solution consumes those dependencies as precompiled NuGet packages <a href="https://www.nuget.org/packages?q=Microsoft.MixedReality.WebRTC.Native.Core">available from nuget.org</a>. Those NuGet packages are compiled from <a href="https://github.com/webrtc-uwp/webrtc-uwp-sdk">the WebRTC UWP project</a> maintained by Microsoft. So <strong>there is no extra setup for those</strong>.</p>
<h2 id="cloning-the-repository">Cloning the repository</h2>
<p>The official repository containing the source code of MixedReality-WebRTC is <a href="https://github.com/microsoft/MixedReality-WebRTC">hosted on GitHub</a>. The latest developments are done on the <code>master</code> branch. Currently the project is in public preview, and there is no release, so this is the only branch of interest.</p>
<p>Clone the <code>master</code> branch of the repository and its dependencies recursively, preferably close to the root of the filesystem (see prerequisites):</p>
<pre><code class="lang-cmd">git clone --recursive https://github.com/microsoft/MixedReality-WebRTC.git -b master C:\mr-webrtc
</code></pre>
<p>Note that <strong>this may take some time (&gt; 5 minutes)</strong> due to the large number of submodules in <a href="https://github.com/webrtc-uwp/webrtc-uwp-sdk">the WebRTC UWP SDK repository</a> this repository depends on.</p>
<h2 id="building-the-libraries">Building the libraries</h2>
<ol>
<li><p>Open the <code>Microsoft.MixedReality.WebRTC.sln</code> Visual Studio solution located at the root of the freshly cloned repository.</p>
</li>
<li><p>Build the solution with F7 or <strong>Build &gt; Build Solution</strong></p>
</li>
</ol>
<p>On successful build, the binaries will be generated in a sub-directory under <code>bin/</code>, and the relevant DLLs will be copied by a post-build script to <code>libs\Microsoft.MixedReality.WebRTC.Unity\Assets\Plugins\</code> for the Unity integration to consume them.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p><strong>Be sure to build the solution before opening any Unity integration project.</strong> As part of the build, the libraries are copied to the <code>Plugins</code> directory of the Unity integration project. There are already some associated <code>.meta</code> files, which have been committed to the repository, to inform Unity of the platform of each DLL. If the Unity project is opened first, before the DLLs are present, Unity will assume those <code>.meta</code> files are stale and will delete them, and then later will recreate some with a different default config once the DLLs are copied. This leads to errors about modules with duplicate names. See the <a href="https://microsoft.github.io/MixedReality-WebRTC/manual/helloworld-unity-importwebrtc.md">Importing MixedReality-WebRTC</a> chapter of the &quot;Hello, Unity World!&quot; tutorial for more details.</p>
</div>
<h2 id="testing-the-build">Testing the build</h2>
<p>Test the newly built libraries by <em>e.g.</em> using the <code>VideoChatDemo</code> Unity integration sample:</p>
<ol>
<li><p>Open the Unity project at <code>libs\Microsoft.MixedReality.WebRTC.Unity</code>.</p>
</li>
<li><p>Load the <code>Assets\Microsoft.MixedReality.WebRTC\Unity.Examples\VideoChatDemo</code> scene.</p>
</li>
<li><p>At the top center of the Unity editor window, press the <strong>Play</strong> button.</p>
</li>
</ol>
<p>After a few seconds (depending on the host device) the left media player should display the video feed from the local webcam. The Unity console window should also display a message about the WebRTC library being initialized successfully. Note that <strong>this does not test any remote connection</strong>, but simply ensures that Unity can use the newly built C++ and C# libraries.</p>
<p>See the <a href="https://microsoft.github.io/MixedReality-WebRTC/manual/helloworld-unity.html">Hello, Unity World!</a> tutorial for more details.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/microsoft/MixedReality-WebRTC/blob/1.0/docs/manual/building.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/branches.gen.js"></script>
    <script type="text/javascript" src="../styles/branch-selector.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
