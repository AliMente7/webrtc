<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Creating a signaler | MixedReality-WebRTC Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Creating a signaler | MixedReality-WebRTC Documentation ">
    <meta name="generator" content="docfx 2.56.2.0">
    
    <link rel="shortcut icon" href="../../mr-webrtc_icon.png">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120" data-uid="">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../mr-webrtc_icon.png" alt="MixedReality-WebRTC">
                <span>MixedReality-WebRTC</span>
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" id="branch-selector">
                <select name="branch"></select>
              </form>
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="creating-a-signaler">Creating a signaler</h1>

<p>The WebRTC standard specifies how a peer-to-peer connection can be established using the <a href="https://en.wikipedia.org/wiki/Session_Description_Protocol">Session Description Protocol (SDP)</a>, but does not enforce a particular signaling solution to discover and select a remote peer, and to send to and receive from it the SDP messages necessary to establish that connection.</p>
<p>MixedReality-WebRTC offers a built-in solution in the form of the <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> component, but also allows any other custom implementation to be used. For this tutorial, we will use the <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> component for simplicity.</p>
<div class="CAUTION">
<h5>Caution</h5>
<p><a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> is very simple and useful for getting started quickly and debugging, but it is worth noting that <strong>this is not a production-quality solution and should not be used in production</strong>. In particular, this component offers <strong>no security whatsoever</strong>, all communications happening in clear text over HTTP, and <strong>no authentication</strong>, as all it requires to connect with a remote peer is to know its identifier. Do not be fooled by the fact that WebRTC supports encryption, as it would be very easy for an attacker to bypass it by compromising the signaler. Remember that any security solution is no better that its weakest link, and <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> is that link. It must be replaced with a secure solution when moving to production.</p>
</div>
<p>The <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> component uses a <a href="https://nodejs.org/">Node.js</a> server with a simple polling model where both peers are constantly checking if a message is available. The server implementation is called <a href="https://github.com/bengreenier/node-dss"><code>node-dss</code></a> and is freely available on GitHub.</p>
<h2 id="install-and-run-node-dss">Install and run <code>node-dss</code></h2>
<p>The <code>node-dss</code> repository has <a href="https://github.com/bengreenier/node-dss/blob/master/README.md">instructions on how to install and run the server</a>, which essentially boil down to installing Node.js, downloading the code, and running:</p>
<pre><code class="lang-cmd">set DEBUG=dss*
npm install
npm start
</code></pre>
<p>This opens a console window which will output all requests received from all peers. Leave that console window open and the <code>node-dss</code> server running for the following, and go back to the Unity editor.</p>
<h2 id="creating-a-nodedsssignaler">Creating a <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a></h2>
<p>The <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> component can be added to the existing <a href="https://docs.unity3d.com/ScriptReference/GameObject.html"><code>GameObject</code></a>, or to a new one. There is no fundamental difference, and this is mostly a matter of taste. For this tutorial we will create a separate game object to separate it from the peer connection in the Hierarchy window.</p>
<p>Create a new <a href="https://docs.unity3d.com/ScriptReference/GameObject.html"><code>GameObject</code></a> with a <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> component:</p>
<ul>
<li>In <a href="https://docs.unity3d.com/Manual/Hierarchy.html">the <strong>Hierarchy</strong> window</a>, select <strong>Create</strong> &gt; <strong>Create empty</strong> to add a new <a href="https://docs.unity3d.com/ScriptReference/GameObject.html"><code>GameObject</code></a> to the scene.</li>
<li>In <a href="https://docs.unity3d.com/Manual/UsingTheInspector.html">the <strong>Inspector</strong> window</a>, select <strong>Add Component</strong> &gt; <strong>MixedReality-WebRTC</strong> &gt; <strong>NodeDssSignaler</strong> to add a <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> component to that new object.</li>
<li>Optionally rename the game object to something easy to remember like &quot;MySignaler&quot; to easily find it in the Hierarchy window.</li>
</ul>
<p><img src="helloworld-unity-6.png" alt="Create a new GameObject with a NodeDssSignaler component"></p>
<p>By default the <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.NodeDssSignaler.html"><code>NodeDssSignaler</code></a> component is configured to connect to a <code>node-dss</code> server running locally on the developper machine at <code>http://127.0.0.1:3000/</code> and poll the server every 500 milliseconds to query for available messages. If using another machine, the HTTP address must be changed.</p>
<h2 id="connecting-the-signaler">Connecting the signaler</h2>
<p>Now that a signaling solution is available, the last step is to assign the <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.Signaler.html#Microsoft_MixedReality_WebRTC_Unity_Signaler_PeerConnection"><code>Signaler.PeerConnection</code></a> property of the peer connection component created earlier:</p>
<ol>
<li>In the <strong>Hierarchy</strong> window, make sure the game object with the peer connection component is selected, then in the <strong>Inspector</strong> window find the <code>Peer Connection</code> property and click on the circle to its right to bring the asset selection window</li>
<li>Select the <strong>Scene</strong> tab of that window</li>
<li>Select the game object with the <a class="xref" href="../../api/Microsoft.MixedReality.WebRTC.Unity.PeerConnection.html"><code>PeerConnection</code></a> component on it.</li>
<li>The name of the <a href="https://docs.unity3d.com/ScriptReference/GameObject.html"><code>GameObject</code></a> containing the component now appears next to the <code>Peer Connection</code> property, followed by &quot;<code>(PeerConnection)</code>&quot; to indicate the actual value is the component of that game object.</li>
</ol>
<p>The signaler object should now appear in the <strong>Inspector</strong> window of the peer connection game object.</p>
<p><img src="helloworld-unity-7.png" alt="Assign the Signaler property in the peer connection"></p>
<p>At that point the peer connection is fully configured and ready to be used. However audio and video tracks are not added automatically, so there is little use for that peer connection. Next we will look at connecting a local webcam and microphone to provide some video and audio track to send through to the peer connection.</p>
<hr>
<p>Next : <a href="helloworld-unity-localvideo.html">Adding local video</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/microsoft/MixedReality-WebRTC/blob/master/docs/manual/unity/helloworld-unity-signaler.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/branches.gen.js"></script>
    <script type="text/javascript" src="../../styles/branch-selector.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
