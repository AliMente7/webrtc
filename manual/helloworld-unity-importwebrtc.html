<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Importing MixedReality-WebRTC | MixedReality-WebRTC Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Importing MixedReality-WebRTC | MixedReality-WebRTC Documentation ">
    <meta name="generator" content="docfx 2.52.0.0">
    
    <link rel="shortcut icon" href="../mr-webrtc_icon.svg">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../mr-webrtc_icon.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" id="branch-selector">
                <select name="branch"></select>
              </form>
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="importing-mixedreality-webrtc">Importing MixedReality-WebRTC</h1>

<p>In order to use the Unity integration, the following pieces are required:</p>
<ul>
<li>Native implementation : <code>mrwebrtc.dll</code> (one variant per platform and architecture)</li>
<li>C# library : <code>Microsoft.MixedReality.WebRTC.dll</code> (single universal module for all platforms and architectures)</li>
<li>Unity integration scripts and assets</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>There is currently no pre-packaged distribution method for Unity, so users have to manually copy the relevant files from the <code>libs\Microsoft.MixedReality.WebRTC.Unity\Assets</code> folder of the GitHub repository into the <code>Assets</code> folder of their own Unity project.</p>
</div>
<h2 id="copying-the-binaries">Copying the binaries</h2>
<p>The binaries can be obtained either prebuilt from the NuGet packages, or from a local build of the Visual Studio solution provided in <a href="https://github.com/microsoft/MixedReality-WebRTC/">the GitHub repository</a>.</p>
<ul>
<li><p><strong>NuGet packages</strong> do not require any build step, so are the most convenient approach. But they are generally only available for stable releases (<em>e.g.</em> <a href="https://github.com/microsoft/MixedReality-WebRTC/tree/release/1.0/">the <code>release/1.0</code> branch</a>), so will be missing any newer development available on <a href="https://github.com/microsoft/MixedReality-WebRTC/tree/master/">the <code>master</code> branch</a>.</p>
</li>
<li><p><strong>A local build</strong> via the Visual Studio solution <code>Microsoft.MixedReality.WebRTC.sln</code> allows accessing the latest features, but may contain some API breaking changes since the latest stable release, so may require some code changes when upgrading an existing project using an earlier API version.</p>
</li>
</ul>
<h3 id="nuget-packages">NuGet packages</h3>
<p>The native implementation and C# library of MixedReality-WebRTC are available precompiled via NuGet packages. See the <a href="https://github.com/microsoft/MixedReality-WebRTC/releases">GitHub Releases page</a> for the latest packages.</p>
<p>The packages can be downloaded from <a href="https://www.nuget.org/profiles/MicrosoftMR">nuget.org</a>. Once downloaded, they can be extracted by simply renaming their extension from <code>.nupkg</code> to <code>.zip</code>, and using any standard ZIP archive extraction method. After the packages are extracted, the DLLs can be copied as detailed on the <strong>Unity integration</strong> section of the <a href="installation.html">installation page</a>.</p>
<h3 id="local-solution-build">Local solution build</h3>
<p>If the native implementation and C# library are compiled from sources as explained in the <a href="building.html">Building</a> page, they are available in one of the sub-folders under the <code>bin/</code> folder at the root of the repository of the MixedReality-WebRTC project.</p>
<p>The C# library <code>Microsoft.MixedReality.WebRTC.dll</code> is a .NET Standard 2.0 library. This means it is compatible with all CPU architectures. This is often referred to as &quot;AnyCPU&quot;, and the C# library is therefore available from <code>bin\AnyCPU\Debug</code> or <code>bin\AnyCPU\Release</code> depending on the build configuration which was compiled. In doubt you can use the <code>Release</code> configuration, which can provide better performance. This module needs to be copied somewhere into the <code>Assets\Plugins\</code> folder of the Unity project (if that folder doesn't exist you can create it). On Windows this can be done via the command line with <code>xcopy</code>, assuming that the git repository of MixedReality-WebRTC was cloned in <code>D:\mr-webrtc</code>:</p>
<pre><code class="lang-cmd">cd /D D:\testproj
xcopy D:/mr-webrtc/bin/AnyCPU/Release/Microsoft.MixedReality.WebRTC.dll Assets/Plugins/
</code></pre>
<p>For the native implementation <code>mrwebrtc.dll</code> things are a bit more complex. The DLL is compiled for a particular platform and architecture, in addition of the Debug or Release build config, and the correct variant needs to be used. On Windows, the Unity Editor needs a <strong>64-bit Desktop</strong> variant (<code>Debug</code> or <code>Release</code>); it is available from the <code>bin\Win32\x64\Release</code> folder (<code>Win32</code> is an alias for <code>Desktop</code>), and should be copied to the <code>Assets\Plugins\Win32\x86_64\</code> folder of the Unity project.</p>
<pre><code class="lang-cmd">cd /D D:\testproj
xcopy D:/mr-webrtc/bin/Win32/x64/Release/mrwebrtc.dll Assets/Plugins/Win32/x86_64/
</code></pre>
<h2 id="configuring-the-import-settings">Configuring the import settings</h2>
<p>When building the Unity application for a given platform, another variant than the one the Unity editor uses may be required to deploy on that platform. In order for the C# library to be truly platform-independent, the name of all native implementation library variants is the same: <code>mrwebrtc</code>. This allows the C# code to reference that DLL with <a href="https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.dllimportattribute?view=netcore-2.1">the same <code>DllImport</code> attribute path</a>. But this also means that multiple files with the same name exist in different folders, and Unity needs to know which one is associated with which build variant, to be able to deploy the correct one only. This is done by configuring the platform associated with a DLL in the import settings in the Unity inspector.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>The <code>mrwebrtc.dll</code> module was in v1.0 named <code>Microsoft.MixedReality.WebRTC.Native.dll</code> when this module was also the C++ library. Those two have now been split apart. The <code>Microsoft.MixedReality.WebRTC.Native</code> name is still in use in some NuGet packages, so depending on the installation method one or the other name are used. However the Unity project must use the <code>mrwebrtc.dll</code> name only for the C# library to find it.</p>
</div>
<ul>
<li>In the <strong>Project</strong> window, select one of the <code>mrwebrtc.dll</code> files from the <code>Plugins</code> folder.</li>
<li>The <strong>Inspector</strong> window now shows the import settings for the selected file, which contains option to configure the deploy platform(s) and architecture(s).</li>
</ul>
<p>For example, by selecting in the <strong>Inspector</strong> window:</p>
<ul>
<li><strong>Any Platform</strong> and <strong>Exclude Platforms: WSAPlayer</strong>, the DLL will be used by Unity on all platforms except UWP platforms. <em>WSAPlayer</em> is the name Unity uses for its UWP standalone player.</li>
<li><strong>CPU</strong> equal to <strong>x86_64</strong>, Unity will only deploy that DLL when deploying on a 64-bit Intel architecture.</li>
</ul>
<p><img src="helloworld-unity-2.png" alt="Configure the import settings for a native implementation DLL"></p>
<p>This way, multiple variants of the same-named <code>mrwebrtc.dll</code> can co-exist in different sub-folders of <code>Assets/Plugins/</code> and Unity will deploy and use the correct variant on each platform.</p>
<div class="NOTE">
<h5>Note</h5>
<p>If Unity complains about &quot;<em>Multiple plugins with the same name 'mrwebrtc'</em>&quot;, then the configurations of the various <code>mrwebrtc.dll</code> files are not exclusive, and 2 or more files have been allowed for deploy on the same platform. Check the configuration of all variants again.</p>
</div>
<p>For <strong>Windows Desktop</strong>, the native implementation DLL variants are:</p>
<table>
<thead>
<tr>
<th>Path</th>
<th>Any Platform</th>
<th>Exclude Platforms</th>
<th>CPU</th>
<th>OS</th>
<th>Example use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Assets/Plugins/Win32/x86</code></td>
<td>yes</td>
<td>WSAPlayer</td>
<td>x86</td>
<td>Windows</td>
<td>32-bit Windows Desktop application</td>
</tr>
<tr>
<td><code>Assets/Plugins/Win32/x86_64</code></td>
<td>yes</td>
<td>WSAPlayer</td>
<td>x86_64</td>
<td>Windows</td>
<td>64-bit Windows Desktop application, including the Unity Editor on Windows</td>
</tr>
</tbody>
</table>
<p>For <strong>Windows UWP</strong>, the native implementation DLL variants are:</p>
<table>
<thead>
<tr>
<th>Path</th>
<th>Any Platform</th>
<th>Include Platforms</th>
<th>SDK</th>
<th>CPU</th>
<th>Example use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Assets/Plugins/UWP/x86</code></td>
<td>no</td>
<td>WSAPlayer</td>
<td>UWP</td>
<td>X86</td>
<td>Microsoft HoloLens (1st gen)</td>
</tr>
<tr>
<td><code>Assets/Plugins/UWP/x86_64</code></td>
<td>no</td>
<td>WSAPlayer</td>
<td>UWP</td>
<td>X64</td>
<td>64-bit UWP Desktop app on Windows</td>
</tr>
<tr>
<td><code>Assets/Plugins/UWP/ARM</code></td>
<td>no</td>
<td>WSAPlayer</td>
<td>UWP</td>
<td>ARM</td>
<td>HoloLens 2 (compatibility)</td>
</tr>
</tbody>
</table>
<div class="NOTE">
<h5>Note</h5>
<p>ARM64 is not currently available. The ARM (32-bit) architecture variant can be used as a fallback on HoloLens 2 and other devices which support running 32-bit ARM applications on ARM64 hardware.</p>
</div>
<p><img src="helloworld-unity-3.png" alt="Configure the import settings for a native C++ DLL for UWP"></p>
<p>If all variants are installed, the resulting hierarchy should look like this:</p>
<pre><code class="lang-shell">Assets
+- Plugins
   +- Win32
   |  +- x86
   |  |  +- mrwebrtc.dll
   |  +- x86_64
   |     +- mrwebrtc.dll
   +- UWP
      +- x86
      |  +- mrwebrtc.dll
      +- x86_64
      |  +- mrwebrtc.dll
      +- ARM
      |  +- mrwebrtc.dll
      +- ARM64
         +- mrwebrtc.dll
</code></pre>
<h2 id="importing-the-unity-integration">Importing the Unity integration</h2>
<p>In order to import the Unity integration into your new Unity project, simply copy the following folders from <code>libs\Microsoft.MixedReality.WebRTC.Unity\Assets\</code> into your project's <code>Assets</code> folder:</p>
<ul>
<li><code>Microsoft.MixedReality.WebRTC.Unity</code> : the core runtime integration, which must ship with the project.</li>
<li><code>Microsoft.MixedReality.WebRTC.Unity.Editor</code> : some Unity Editor utilities, not required at runtime.</li>
</ul>
<p>After Unity finished processing the new files, the <strong>Project</strong> window should look like this:</p>
<p><img src="helloworld-unity-4.png" alt="Import the Unity integration"></p>
<p>The other folders are optional and contain samples and tests. They can be imported for testing and prototyping, but are not required to ship a project with MixedReality-WebRTC:</p>
<ul>
<li><code>Microsoft.MixedReality.WebRTC.Unity.Examples</code> : sample projects demonstrating the use of the Unity integration and its various components.</li>
<li><code>Microsoft.MixedReality.WebRTC.Unity.Tests.Editor</code> : Editor-only tests for the Unity integration.</li>
<li><code>Microsoft.MixedReality.WebRTC.Unity.Tests.Runtime</code> : runtime tests for the Unity integration.</li>
</ul>
<hr>
<p>Next : <a href="helloworld-unity-peerconnection.html">Creating a peer connection</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/microsoft/MixedReality-WebRTC/blob/master/docs/manual/helloworld-unity-importwebrtc.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/branches.gen.js"></script>
    <script type="text/javascript" src="../styles/branch-selector.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
